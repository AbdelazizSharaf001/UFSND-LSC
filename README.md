# UFSND-LSC
Submission repo for -> UdacityFSND: Linux Server Configuration project

> this file is written step by step as explainatory instructions to facilitate discription.
>
> reviewer data are at the end

---
1. prepare your files
    - it's advisable to use a shell to facilitate your work more than the browser
    - if you want to start the server with your own ssh public key generate it
        * `ssh-keygen` command will do the trick
        * make sure to keep `passphrase` you enter save and remember it
        * you'll need both files generrated as will as this passphrase
    > you'll need to generate key pairs for every user you add to your instance
2. ssh into the server
    - Start a new Ubuntu Linux server instance on Amazon Lightsail.
        * create aws account
        * activate acount
        * login to lightsail
        * hit "Create instance" button
        * choose `"Linux/Unix"`
        * choose `"OS Only"`
        * choose `"Ubuntu 18.04 LTS"` `// any ubuntu should do`
        * to change default ssh key pair
            * click on `"Change SSH key pair"`
            * you could:
                
                choose one of your keys,
                
                click `"Create New"` `site will generate ssh key pair with name you enter`
                
                or click `"Upload New"` to add new `if you completed step (1)`
            * upload public key file
                
                `normally *.pub generated by ssh-keygen // this could be changed so check files contents`
            * whatever you do, you must obtain a copy of the private key you're gonna use
                
                let's say `pk.pem`
         * Choose `Instance plan` you prefer
         * add a unique name for your instance
         * click `"Create instance"`
    - Wait until your instance is being created
    - ensure that your instance is started `if not start it`
    - SSH into the server `two methods`
        * First
            
            from lightsail wibsite using webbrowser
            > don't work well on smart phones
            * Click on the shell icon beside your instance name
            
            or
            * Click on the instance name
                
                or `"Manage"` in the dropdown menu beside it
            * click on `"Connect using SSH"`
        * Second (recommended)
            * click `"Manage"` or your instance name
            * get `Public IP` & `User name`
            * within any shell type
                
                `$ ssh USER_NAME@PUBLIC_IP -p 22 -i /PATH/TO/pk.pem`
            * Server could complain about your file permissins
                
                just set them to be non-accessable files

                this should do: `chmod 600 pk.pem `
3. install packages

    `sudo apt install zsh nano apache2 apache2-utils libapache2-mod-wsgi-py3 python3 python3-pip`
4. Secure instance:
    - Upgrade server
        * upgrade distro
        
        `sudo apt-get dist-upgrade`
        * Update all currently installed packages
        
        `sudo apt update; sudo apt upgrade; sudo apt autoremove; sudo apt autoclean;`
    - configure the Lightsail firewall to allow port 2200
    - configre SSH
    
        update configration rules in `/etc/ssh/sshd_config`
        like this:
        ```bash
        $ sudo nano /etc/ssh/sshd_config
        
        # find and change rules below
        port 2200                   # Change the SSH port from 22 to 2200
        PermitRootLogin no          # stop root from login remotly
        PasswordAuthentication no   # only alow key based authentication
        ```
    - configre UFW
        * Only allow connections for SSH (port 2200), HTTP (port 80), and NTP (port 123).
        ```bash
        sudo ufw default allow outgong
        sudo ufw default deny incoming
        sudo ufw allow 2200/tcp
        sudo ufw allow www
        sudo ufw allow 123/tcp
        sudo ufw enable
        ```
    - delete ssh rule from lightsail configration
        
        make sure it's ssh default that you delete, not 2200 you added
4. user management
    - Create a new user account named grader
    
      `sudo adduser grader`
    - Give grader the superuser permission with no password
    
      ```bash
      $ sudo cp /etc/sudoers.d/90-cloud-init-users /etc/sudoers.d/grader
      $ sudo nano /etc/sudoers.d/grader
      grader ALL=(ALL) NOPASSWD:ALL
      ```
    - set ssh key for grader
      
      generate a new ssh key pair like step (1), then follow this code:
      ```bash
      cd /home/grader/
      mkdir .ssh
      sudo nano .ssh/authorized_keys
      ```
      copy/paste public key you generated inside it



Prepare to deploy your project.
9. Configure the local timezone to UTC.
10. Install and configure Apache to serve a Python mod_wsgi application.

If you built your project with Python 3, you will need to install the Python 3 mod_wsgi package on your server: sudo apt-get install libapache2-mod-wsgi-py3.
11. Install and configure PostgreSQL:

Do not allow remote connections
Create a new database user named catalog that has limited permissions to your catalog application database.
12. Install git.

Deploy the Item Catalog project.
13. Clone and setup your Item Catalog project from the Github repository you created earlier in this Nanodegree program.
14. Set it up in your server so that it functions correctly when visiting your serverâ€™s IP address in a browser. Make sure that your .git directory is not publicly accessible via a browser!
